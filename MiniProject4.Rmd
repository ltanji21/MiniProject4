---
title: "The Ignored Women of Hollywood"
author: "Leigh Tanji, Samantha Bryce"
date: '`r format(Sys.Date(), "%B %e, %Y")`'
output: 
  html_document:
    theme: "journal"
    code_folding: hide
    fig_width: 6 
    fig_height: 2.5
    figure_caption: true
---
```{r Data Wrangling, message=FALSE, warnings = FALSE}
#loading libraries
suppressMessages(library(mdsr))
suppressMessages(library(RMySQL))
suppressMessages(library(dplyr))
suppressMessages(library(ggplot2))

#**GETTING FEMALE DIRECTORS**
#Getting information on directors from cast info. 
db <- dbConnect_scidb(dbname = "imdb")

all_directors <- db %>%
  dbGetQuery("SELECT person_id, movie_id, role_id
             FROM cast_info
             WHERE role_id = 8;")

#Getting information on female movie people's id, name, and gender from 'imdb.name' 
director_info<- db %>%
  dbGetQuery("SELECT id, name, gender 
             FROM imdb.name
             WHERE gender = 'f';")

director_info <- rename(director_info, person_id = id)

#Combining information about female movie people and just directors to get more information about female directors.
all_dirctor_info <- all_directors %>%
  inner_join(director_info, by = "person_id")

#**GETTING GLOBAL MOVIES**
#Getting infomation on all movies. Since there's a lot of movies, we need more info on these movies. 
movies <- db %>%
  dbGetQuery("SELECT DISTINCT id, title, kind_id, production_year
             FROM title
             WHERE kind_id = 1;")
movies <- rename(movies, movie_id = id)

#Getting info about movie runtimes.
movie_runtime <- db %>%
  dbGetQuery("SELECT movie_id, info
             FROM imdb.movie_info 
             WHERE info_type_id = 1 AND info >= 80
             GROUP BY movie_id;")

#merging info about movies with runtimes over 80minutes and movie title, and movie id.  
actual_movies <- movie_runtime %>%
  inner_join(movies, by = "movie_id")

actual_movies <- actual_movies %>%
  group_by(movie_id, production_year) %>%
  filter(!is.na(production_year))

#**COMBINING FEMALE DIRECTORS AND MOVIES**
movie_f_directors <- actual_movies %>%
  inner_join(all_dirctor_info, by = "movie_id")

#cutting out runtime, kind_id, movie_id, person_id, role_id, and getting number of female directed movies per year.
no_movie_f_directors <- movie_f_directors %>%
  group_by(production_year) %>%
  filter(production_year >= 1896 & production_year <= 2016) %>%
  summarize(n_female_directors = n())

#**GETTING number of directors per year GLOBALLY** 
director_no <- all_directors %>%
  inner_join(actual_movies, by = "movie_id") %>%
  group_by(movie_id) %>%
  filter(!is.na(production_year))

yearly_director_no <- director_no %>%
  group_by(production_year) %>%
  filter(production_year >= 1896 & production_year <= 2016) %>%
  summarize(n_directors = n())

#Getting the percentage of female directors by year. 
female_director_ratio <- no_movie_f_directors %>%
  inner_join(yearly_director_no, by = "production_year") %>%
  group_by(production_year) %>%
  summarise(ratio_f_directors = (n_female_directors/n_directors)*100)
 
#Making a ggplot of ratio of females per year.
female_director_graph <- ggplot(female_director_ratio, aes(x = production_year, y = ratio_f_directors)) + 
  geom_point(alpha = .3) +
  ylab("percentage of female directors") + 
  xlab("Production Year") + 
  ggtitle("percentage of films produced by women per year") +
  geom_line() + theme(text=element_text(family="Times"))
```

![Photo-illustration: Maya Robinson and Photos by Getty Images](http://pixel.nymag.com/imgs/daily/vulture/2015/11/02/02-female-directors-lede-3.jpg)
Some of the female directors in holywood[^1]

As Charlize Theron defies her cult leader in Mad Max: Fury Road and Gal Gadot smashes the god of war in Wonder Woman, women seem to have finally found their place in Hollywood. However, the fictional women on screen only shroud the substantial struggle for recognition of the women behind the scenes. In 2017, [female directors](http://www.vulture.com/2015/10/100-women-directors-hollywood-should-be-hiring.html) are still the marginalized minority.

Throughout film history, female directed films have been, at most, 7.9% of all films produced in the 20th century. However, as the women’s rights movement gained momentum, female directed films become more prevalent. The ratification of the 19th amendment, or the women’s right to vote, in 1920 was marked by a whopping 5% of the movies being directed by women. This glass ceiling isn’t shattered again until 1988, right after the ___ . The sharp rise in female directed film seems to keep going from 1975 to 2000 when suddenly 

```{r, error=FALSE, message=FALSE, warning=FALSE, fig.width= 10, fig.height= 5, fig.align="center"}
#Graphic of Oscar best film wining movies by female directors. 
female_director_graph_best_film <- ggplot(female_director_ratio, aes(x = production_year, y = ratio_f_directors)) + 
  geom_point(alpha = .3) + 
  theme_bw() +
  ylab("% Female Directors") + 
  xlab("Production Year") + 
  ggtitle("Annual Percentage of Female Directed Films") +
  geom_line() + 
  labs(caption = "Percentages of female directed films by year.") +
  theme(plot.caption = element_text(hjust=0, size=8)) +
  scale_y_continuous(limits = c(0, 9)) + 
  scale_x_continuous(limits = c(1920, 2016)) + theme(text=element_text(family="Times")) +
  annotate("text", x = 1926, y = 5.5, label = "2nd Woman elected into Congress", size = 3) +
  annotate("text", x = 1939, y = 2, label = "WWII starts", size = 3) + 
  geom_segment(aes(x = 1939, y = 0.7, xend = 1939, yend = 1.8)) +
  annotate("text", x = 1945, y = 0, label = "WWII Ends", size = 3) +
  geom_segment(aes(x = 1945, y = 0.2, xend = 1945, yend = 0.7)) +
  annotate("text", x = 1946, y = 3.4, label = "Simon de Beauvoir's The 
Second Sex is Published", size = 3) +
  geom_segment(aes(x = 1946, y = 3, xend = 1946, yend = 0.6)) +
  annotate("text", x = 1966, y = 4.5, label = "Natonal Organization for Women is born", size = 3) +
  geom_segment(aes(x = 1966, y = 1.37, xend = 1966, yend = 4.3)) +
  annotate("text", x = 1960, y = 0, label = "First Oral Contraceptive 
is Approved by The FDA", size = 3) +
  geom_segment(aes(x = 1960, y = 0.4, xend = 1960, yend = 0.94)) +
  annotate("text", x = 1972, y = 3.4, label = "Legalization of 
Birth Control For All", size = 3) +
  geom_segment(aes(x = 1970, y = 1.06, xend = 1970, yend = 3)) +
  annotate("text", x = 1984, y = 5.6, label = "The Guerrilla Girls 
are Formed", size = 3) +
  geom_segment(aes(x = 1984, y = 5.2, xend = 1984, yend = 3.6)) +
  annotate("text", x = 1990, y = 7.5, label = "Third Wave Direct Action 
Corporation is Founded", size = 3) +
  geom_segment(aes(x = 1992, y = 5.69, xend = 1992, yend = 7)) +
  annotate("text", x = 2001, y = 9, label = "9/11 Attacks", size = 3) +
  geom_segment(aes(x = 2001, y = 7.9, xend = 2001, yend = 8.8)) 

female_director_graph_best_film
```

Even though there has been a slow rise in female directors in the film industry this is not a guarantee that movies include women on this string. This brings us to the Bechdel test, named after Alison Bechdel who first introduced the test in one of her comic strips. The test is rather simple and has three criteria for a film to pass. First, the film must have at least two female characters. Second, these two female characters must talk to each other. Third, these female characters must talk to each other about something other than men. The test sounds simple enough, but of the almost 7500 films that have been analyzed, a little under 60% passed.[^3] This raises the point that point that the lack of female-representation in Hollywood is a multi-faceted problem that extends beyond the number of female directors.

![The comic that started it all.](https://upload.wikimedia.org/wikipedia/en/b/bf/Dykes_to_Watch_Out_For_%28Bechdel_test_origin%29.jpg)
The comic that started it all.[^4]

When looking at films that have received critical acclaim, specifically been nominated for the Academy Award for Best Picture,[^4] and been directed by women, a new narrative forms. Among the 12 films that have been nominated, 10 pass the Bechdel test, one fails, and one has not yet been categorized. You can see these films listed below, which we encourage you to watch and support.

```{r, warning=FALSE, messages = FALSE}
#Making the table for Oscar winning, female directed movies. 
library(knitr)
library(kableExtra)

Oscar_Winners <- c("3420538", "3901612", "4200072", "4369038", "4374245", "4408215", "4565524", "4590482",
"4404940", "3890366", "3280928", "3314581")

Passed <- c(1, 2, 4, 5, 6, 8, 9, 10, 11, 12)

Oscars_directors_info <- movie_f_directors %>%
  filter(movie_id %in% Oscar_Winners, gender == "f") %>%
  ungroup() %>%
  arrange(production_year) %>% 
  select(production_year, title, name) %>%
  rename("Production Year" = production_year, Name = name, Title = title) %>%
  kable("html") %>%
  kable_styling(bootstrap_options = "striped") %>%
  row_spec(Passed, color = "white", background = "green") %>%
  row_spec(7, color = "white", background = "red")

Oscars_directors_info 
```

This might make you think that in general films receiving critical acclaim do a better job at passing the Bechdel test. Unfortunately, that is not the case. Looking at all Best Picture nominees from 1990 onwards, a trend of fluctuation emerges. In 1990 100% of the nominees passed the Bechdel test. In contrast, in 2008 a mere 20% of the nominees passed.

```{r, message=FALSE, warning=FALSE, error = FALSE, fig.width= 10, fig.height= 5, fig.align="center"}
#Graphic of the percentage of best film nominees that pass the Bechdel test
#It should also be noted that a few films from the early 1990s had to be omitted due to them not yet being classified
year <- c(2016, 2015, 2014, 2013, 2012, 2011, 2010, 2009, 2008, 2007, 2006, 2005, 2004, 2003, 2002, 2001, 2000, 1999, 1998, 1997, 1996, 1995, 1994, 1993, 1992, 1991, 1990)
percent_passing <- c(0.44, 0.5, 0.5, 0.67, 0.78, 0.44, 0.8, 0.3, 0.2, 0.6, 0.6, 0.4, 0.8, 0.4, 0.4, 0.5, 0.8, 0.75, 0.4, 0.4, 0.75, 0.75, 0.4, 0.4, 0.4, 1.00, 0.75)
bechdel_all_films <- data.frame(year, percent_passing)

bechdel_graph_best_film <- ggplot(bechdel_all_films, aes(x = year, y = percent_passing, fill = percent_passing)) + geom_bar(stat = "identity") + scale_fill_gradient(low="red", high="green") +
  theme_bw() +
  ylab("% of films that passed the Bechdel test") + 
  xlab("Award Year") + 
  ggtitle("Nominated for Picture and Passing the Bechdel Test") + theme(text=element_text(family="Times")) + scale_y_continuous(labels = scales::percent) + theme(legend.position="none")

bechdel_annotated <- bechdel_graph_best_film +
  annotate("text", x = 2000, y = 0.90, label = "George W. Bush elected", size = 3) +
  geom_segment(aes(x = 2000, y = 0.8, xend = 2000, yend = 0.88)) +
  annotate("text", x = 2015, y = 0.63, label = "Donald Trump", size = 3) +
  annotate("text", x = 2015, y = 0.6, label = "announces candidacy", size = 3) +
  geom_segment(aes(x = 2015, y = 0.5, xend = 2015, yend = 0.58)) +
  annotate("text", x = 1992, y = 0.5, label = "Bill Clinton elected", size = 3) + 
  geom_segment(aes(x = 1992, y = 0.4, xend = 1992, yend = 0.48)) +
  annotate("text", x = 2008, y = 0.3, label = "Barack Obama elected", size = 3) + 
  geom_segment(aes(x = 2008, y = 0.2, xend = 2008, yend = 0.28)) +
  annotate("text", x = 2004, y = 0.85, label = "Presidential election, John Kerry", size = 3) +
  geom_segment(aes(x = 2004, y = 0.8, xend = 2004, yend = 0.84)) +
  annotate("text", x = 2011, y = 0.52, label = "Republican primary campaigning begins", size = 3) +
  geom_segment(aes(x = 2011, y = 0.44, xend = 2011, yend = 0.5)) + 
  labs(caption = "Percentages of female Best Picture nominees from 1990 onward that passed the Bechdel test. Major events relating to presidential candidacies and elections are also noted. Any film that has
not yet been classified as passing or failing the Bechdel test has been omitted.") +
  theme(plot.caption = element_text(hjust=0, size=8)) + theme(text=element_text(family="Times"))

bechdel_annotated
```

Somewhat surprisingly, this trend of fluctuation seems to correspond well with U.S. politics, more specifically presidential elections. During Bill Clinton’s presidency, one of the first spikes in Best Picture nominees passing the Bechdel test emerges. After George W. Bush is elected, the percentage of films passing takes a nosedive, only spiking during 2004 when Democratic nominees John Kerry was a frequent part of the political dialogue. As Bush’s presidency continue, numbers stay low, dipping the lowest in 2008 when Barack Obama is elected. Following Obama’s election, the percentage of films goes up, only dipping during the year of Republican primary campaigning (2011). As Obama’s presidency begins to wrap up and Donald Trump announces his candidacy, things get worse and worse. While we don’t yet know his films during Trump’s first year of presidency will do, [things are not looking hopeful](https://www.washingtonpost.com/amphtml/national/no-female-directors-big-sick-and-other-globes-surprises/2017/12/11/df470cba-dea9-11e7-b2e9-8c636f076c76_story.html). Our political climate and dialogue appears to drive the presence (and absence) of women in the media we consume.

The Bechdel test is not perfect, and extremely progressive films like [Brokeback Mountain](https://en.wikipedia.org/wiki/Brokeback_Mountain) fail the test. However the test gives us a good idea of how the film industry is treating women, and right now they are not treating us well. As Robin Morgan writes:
> “More than any other time in history, that force [feminism] is needed to save this imperiled blue planet. Feminism, for me, is the politics of the 21st century.”[^5]

With this in mind we need to take the force that is feminism and support women in an industry that constantly ignores them. When you can financially support films that have women directing and producing them, and that include women in their narratives.

[^1]:http://www.vulture.com/2015/10/100-women-directors-hollywood-should-be-hiring.html
[^2]:https://bechdeltest.com/statistics/
[^3]:https://upload.wikimedia.org/wikipedia/en/b/bf/Dykes_to_Watch_Out_For_%28Bechdel_test_origin%29.jpg
[^4]:https://en.wikipedia.org/wiki/Academy_Award_for_Best_Picture
[^5]:http://time.com/3588846/time-apologizes-feminist-word-poll-robin-morgan/

[Git repository used for this assignment](https://github.com/ltanji21/MiniProject4/blob/master/MiniProject4.Rmd)












