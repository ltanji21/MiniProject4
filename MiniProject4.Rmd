---
title: "MiniProject 4"
author: "Leigh Tanji, Samantha Bryce"
date: "2017年11月29日"
output: html_document
---

#Loading libraries
```{r}
suppressMessages(library(mdsr))
suppressMessages(library(RMySQL))
suppressMessages(library(dplyr))
suppressMessages(library(ggplot2))
```

Getting directors 
```{r, message=FALSE, echo=FALSE}
all_directors <- dbConnect_scidb(dbname = "imdb")
class(all_directors)

all_directors <- all_directors %>%
  dbGetQuery("SELECT person_id, movie_id, role_id
             FROM cast_info 
             WHERE role_id = 8;")
```

Filing in Movie titles in `directors` table
```{r}
movies <- dbConnect_scidb(dbname = "imdb")
class(movies)


movies <- movies %>%
  dbGetQuery("SELECT id, title, kind_id, production_year
             FROM title
             WHERE kind_id = 1;")


list2env(movies, envir = .GlobalEnv)
movies <- rename(movies, movie_id = id)


movie_directors <- all_directors %>%
  inner_join(movies, by = "movie_id")
```

Combining information about the directors to the 'movie_directors' table. 
```{r}
director_info <- dbConnect_scidb(dbname = "imdb")
class(director_info)


director_info <- director_info %>%
  dbGetQuery("SELECT id, name, gender 
             FROM imdb.name 
             WHERE gender = 'f';")


list2env(movies, envir = .GlobalEnv)
director_info<- rename(director_info, person_id = id)


female_directors <- movie_directors %>%
  inner_join(director_info, by = "person_id")
```

Clean Up the table od female directors.
```{r}
female_directors <- female_directors %>%
  select(production_year, title, name)
```



















